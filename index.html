<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>totteatta</title>
    
    <link rel="icon" href="icon.jpg" type="image/jpeg">
    <link rel="apple-touch-icon" href="icon.jpg">

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #202020;
            color: white;
            margin: 0;
            padding: 40px 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 30px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.2s ease-in-out;
        }

        /* メインコンテンツの幅制限 */
        .container {
            width: 100%;
            max-width: 700px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            width: 100%;
        }

        .column { display: flex; flex-direction: column; gap: 12px; }
        .column-title { font-size: 12px; color: #888; text-align: center; margin-bottom: 5px; letter-spacing: 2px; }

        .file-item {
            background-color: #333;
            color: white;
            padding: 16px 10px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.2s ease-in-out;
            font-size: 14px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border: none;
        }

        .visible { opacity: 1 !important; transform: translateY(0) !important; }

        /* ニュースセクション（中央・一番下） */
        #news-section {
            background-color: #2a2a2a;
            text-align: left;
            padding: 20px;
            border-radius: 8px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.2s ease-in-out;
            width: 100%;
            box-sizing: border-box;
        }

        @media (hover: hover) {
            .file-item:hover { transform: scale(1.05); background-color: #3d3d3d; }
        }

        @media (max-width: 500px) { .wrapper { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <h1 id="title">totteatta</h1>

    <div class="container">
        <div class="wrapper">
            <div class="column">
                <div class="column-title">LINKS</div>
                <a href="https://scratch.mit.edu/users/oira-edu/" class="file-item external">Scratch</a>
                <a href="https://www.xbox.com/ja-JP/play/user/oiraedu" class="file-item external">Xbox</a>
                <a href="https://www.youtube.com/@tttttoooyr" class="file-item external">YouTube</a>
                <a href="https://www.instagram.com/yyuuuuttta/" class="file-item external">Instagram</a>
                <a href="https://x.com/accounts1218" class="file-item external">X</a>
                <a href="https://www.strava.com/athletes/195434973" class="file-item external">Strava</a>
                <a href="https://www.duolingo.com/profile/oodde" class="file-item external">Duolingo</a>
                <a href="https://www.twitch.tv/totteatta" class="file-item external">Twitch</a>
                <a href="https://www.roblox.com/ja/users/5447700511/profile" class="file-item external">Roblox</a>
                <a href="https://open.spotify.com/user/317jyzpis66kni22p4ct7j4zxkum" class="file-item external">Spotify</a>
                <a href="https://ja.wikipedia.org/wiki/%E5%88%A9%E7%94%A8%E8%80%85:%E3%81%88%E3%81%BA%E3%81%8A%E3%82%93%E3%81%98%E3%82%87%E3%81%84" class="file-item external">Wikipedia</a>
            </div>

            <div class="column">
                <div class="column-title">GITHUB</div>
                <a href="https://github.com/totteatta" id="fixed-github" class="file-item">Github</a>
                <div id="dynamic-files" style="display: flex; flex-direction: column; gap: 12px;"></div>
            </div>
        </div>

        <div id="news-section">
            <div style="font-size: 10px; color: #888; margin-bottom: 12px; letter-spacing: 1px; text-align: center;">WORLD NEWS</div>
            <div id="news-list" style="font-size: 14px; line-height: 1.6;">読み込み中...</div>
        </div>
    </div>

    <script>
        // ページ読み込み時に即実行
        window.onload = () => {
            // タイトル表示
            setTimeout(() => { document.getElementById('title').classList.add('visible'); }, 50);
            
            // 固定ボタン表示
            setTimeout(() => { document.getElementById('fixed-github').classList.add('visible'); }, 100);
            
            // 左側ボタン表示
            document.querySelectorAll('.external').forEach((el, i) => {
                setTimeout(() => { el.classList.add('visible'); }, 150 + (i * 30));
            });

            loadFiles(); 
            loadNews();
        };

        async function loadFiles() {
            const user = "totteatta";
            const repo = "main";
            const url = `https://api.github.com/repos/${user}/${repo}/contents/`;
            const container = document.getElementById('dynamic-files');

            try {
                const response = await fetch(url);
                const files = await response.json();
                const htmlFiles = files.filter(f => f.name.endsWith('.html') && f.name !== 'index.html');
                
                htmlFiles.forEach((file, index) => {
                    const a = document.createElement('a');
                    a.href = `https://totteatta.github.io/main/${file.name}`;
                    a.className = 'file-item';
                    a.innerText = file.name.replace('.html', '');
                    container.appendChild(a);
                    setTimeout(() => { a.classList.add('visible'); }, 200 + (index * 50)); 
                });
            } catch (e) { console.error("Load Error"); }
        }

        async function loadNews() {
            const list = document.getElementById('news-list');
            const section = document.getElementById('news-section');
            const RSS_URL = "https://news.google.com/rss?hl=ja&gl=JP&ceid=JP:ja";
            const API_URL = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(RSS_URL)}`;

            try {
                const res = await fetch(API_URL);
                const data = await res.json();
                if (data.status === 'ok') {
                    list.innerHTML = "";
                    data.items.slice(0, 5).forEach(item => {
                        const a = document.createElement('a');
                        a.href = item.link; a.target = "_blank";
                        a.style = "display:block; color:#ddd; text-decoration:none; margin-bottom:12px; border-bottom:1px solid #444; padding-bottom:8px;";
                        a.innerText = "・ " + item.title;
                        list.appendChild(a);
                    });
                    // ニュースをふわっと表示
                    setTimeout(() => { section.classList.add('visible'); }, 500);
                }
            } catch (e) { list.innerText = "ニュース取得失敗"; }
        }
    </script>
</body>
</html>

